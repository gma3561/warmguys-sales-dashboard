"use strict";(()=>{var e={};e.id=913,e.ids=[913,888,660],e.modules={3415:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>h,getServerSideProps:()=>m,getStaticPaths:()=>u,getStaticProps:()=>p,reportWebVitals:()=>j,routeModule:()=>w,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>y});var r=s(7093),l=s(5244),i=s(1323),d=s(9209),o=s.n(d),x=s(1065),n=s(3593),c=e([n]);n=(c.then?(await c)():c)[0];let h=(0,i.l)(n,"default"),p=(0,i.l)(n,"getStaticProps"),u=(0,i.l)(n,"getStaticPaths"),m=(0,i.l)(n,"getServerSideProps"),g=(0,i.l)(n,"config"),j=(0,i.l)(n,"reportWebVitals"),y=(0,i.l)(n,"unstable_getStaticProps"),f=(0,i.l)(n,"unstable_getStaticPaths"),b=(0,i.l)(n,"unstable_getStaticParams"),v=(0,i.l)(n,"unstable_getServerProps"),N=(0,i.l)(n,"unstable_getServerSideProps"),w=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/apgujeong",pathname:"/apgujeong",bundlePath:"",filename:""},components:{App:x.default,Document:o()},userland:n});a()}catch(e){a(e)}})},3155:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var r=s(997),l=s(6689),i=s(3850),d=s(9009),o=s(8687),x=s(4195),n=s(3023),c=s(8963),h=s(4279),p=s(1460),u=s(6880),m=s(4831),g=s(7226),j=e([d,o,x,n,c,h,p,u,m,g]);[d,o,x,n,c,h,p,u,m,g]=j.then?(await j)():j;let __WEBPACK_DEFAULT_EXPORT__=({salesData:e,kpis:t})=>{let[s,a]=(0,l.useState)("all"),[j,y]=(0,l.useState)([{value:"all",label:"전체 지점"}]),[f,b]=(0,l.useState)([]);(0,l.useEffect)(()=>{if(!e||0===e.length)return;let t=e.map(e=>({date:e.date,cardSales:parseFloat(e.card_sales||0),cashSales:parseFloat(e.cash_sales||0),cashReceipt:parseFloat(e.cash_receipt||0),deliverySales:parseFloat(e.delivery_sales||0),accountTransfer:parseFloat(e.account_transfer||0),totalSales:parseFloat(e.total_sales||0),customerCount:parseInt(e.customer_count||0),tableTurnover:parseFloat(e.table_turnover||0)}));b(t),y([{value:"all",label:"전체 지점"},{value:"gangnam",label:"강남점"},{value:"sinsa",label:"신사점"}])},[e]);let v=f.slice(-30),N=f.reduce((e,t)=>e+t.cardSales,0),w=f.reduce((e,t)=>e+t.cashSales+t.cashReceipt,0),q=f.reduce((e,t)=>e+t.deliverySales,0),S=f.reduce((e,t)=>e+t.accountTransfer,0),_=[{name:"카드",value:N},{name:"현금",value:w},{name:"배달",value:q},{name:"계좌이체",value:S}],P=f.slice(-14);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"지점 선택"}),r.jsx("select",{value:s,onChange:e=>a(e.target.value),className:"border rounded px-3 py-1",children:j.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"현재 데이터에는 지점 정보가 포함되어 있지 않습니다. 지점별 데이터가 필요하다면 데이터베이스에 지점 컬럼을 추가해야 합니다."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"총매출"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[(0,i.uf)(t.totalSales||0),"원"]}),(0,r.jsxs)("p",{className:`text-sm ${t.growthRate>=0?"text-green-500":"text-red-500"}`,children:[t.growthRate>=0?"↑":"↓"," ",Math.abs(t.growthRate||0).toFixed(1),"%"]})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"카드 매출"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[(0,i.uf)(N),"원"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["전체의 ",(0,i.T3)(N/t.totalSales*100||0)]})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"총 고객수"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[(0,i.uf)(f.reduce((e,t)=>e+t.customerCount,0)),"명"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["객단가 ",(0,i.uf)(t.totalSales/f.reduce((e,t)=>e+t.customerCount,0)),"원"]})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"평균 테이블 회전율"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[(f.reduce((e,t)=>e+t.tableTurnover,0)/f.length||0).toFixed(1),"회"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["최고 ",Math.max(...f.map(e=>e.tableTurnover||0)).toFixed(1),"회"]})]})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow overflow-x-auto",children:[r.jsx("h3",{className:"text-lg font-medium mb-3",children:"일별 매출 상세"}),(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"날짜"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"카드"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"현금"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"현금영수증"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"배달"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"계좌이체"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"고객수"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"테이블회전율"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"총매출"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.slice().reverse().map((e,t)=>(0,r.jsxs)("tr",{className:t%2==0?"bg-gray-50":"bg-white",children:[r.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e.date}),r.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-right",children:(0,i.uf)(e.cardSales)}),r.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-right",children:(0,i.uf)(e.cashSales)}),r.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-right",children:(0,i.uf)(e.cashReceipt)}),r.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-right",children:(0,i.uf)(e.deliverySales)}),r.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-right",children:(0,i.uf)(e.accountTransfer)}),r.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-right",children:e.customerCount}),r.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-right",children:e.tableTurnover.toFixed(1)}),r.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-right font-bold",children:(0,i.uf)(e.totalSales)})]},t))})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("h3",{className:"text-lg font-medium mb-3",children:"총매출 추이"}),r.jsx("div",{className:"h-64",children:r.jsx(d.h,{width:"100%",height:"100%",children:(0,r.jsxs)(o.w,{data:v,margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(x.q,{strokeDasharray:"3 3"}),r.jsx(n.K,{dataKey:"date"}),r.jsx(c.B,{}),r.jsx(h.u,{formatter:e=>[`${(0,i.uf)(e)}원`,"매출"],labelFormatter:e=>`날짜: ${e}`}),r.jsx(p.D,{}),r.jsx(u.x,{type:"monotone",dataKey:"totalSales",name:"총매출",stroke:"#8884d8",activeDot:{r:8}})]})})})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("h3",{className:"text-lg font-medium mb-3",children:"결제 방식 분포"}),r.jsx("div",{className:"h-64",children:r.jsx(d.h,{width:"100%",height:"100%",children:(0,r.jsxs)(m.v,{data:_,margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(x.q,{strokeDasharray:"3 3"}),r.jsx(n.K,{dataKey:"name"}),r.jsx(c.B,{}),r.jsx(h.u,{formatter:e=>[`${(0,i.uf)(e)}원`,"매출"]}),r.jsx(p.D,{}),r.jsx(g.$,{dataKey:"value",name:"매출액",fill:"#82ca9d"})]})})})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("h3",{className:"text-lg font-medium mb-3",children:"고객수 & 테이블 회전율 추이"}),r.jsx("div",{className:"h-64",children:r.jsx(d.h,{width:"100%",height:"100%",children:(0,r.jsxs)(o.w,{data:P,margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(x.q,{strokeDasharray:"3 3"}),r.jsx(n.K,{dataKey:"date"}),r.jsx(c.B,{yAxisId:"left"}),r.jsx(c.B,{yAxisId:"right",orientation:"right"}),r.jsx(h.u,{}),r.jsx(p.D,{}),r.jsx(u.x,{yAxisId:"left",type:"monotone",dataKey:"customerCount",name:"고객수",stroke:"#8884d8"}),r.jsx(u.x,{yAxisId:"right",type:"monotone",dataKey:"tableTurnover",name:"테이블회전율",stroke:"#82ca9d"})]})})})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("h3",{className:"text-lg font-medium mb-3",children:"결제 방식별 일간 추이"}),r.jsx("div",{className:"h-64",children:r.jsx(d.h,{width:"100%",height:"100%",children:(0,r.jsxs)(o.w,{data:v,margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(x.q,{strokeDasharray:"3 3"}),r.jsx(n.K,{dataKey:"date"}),r.jsx(c.B,{}),r.jsx(h.u,{formatter:e=>[`${(0,i.uf)(e)}원`,"매출"]}),r.jsx(p.D,{}),r.jsx(u.x,{type:"monotone",dataKey:"cardSales",name:"카드",stroke:"#8884d8"}),r.jsx(u.x,{type:"monotone",dataKey:"cashSales",name:"현금",stroke:"#82ca9d"}),r.jsx(u.x,{type:"monotone",dataKey:"deliverySales",name:"배달",stroke:"#ffc658"})]})})})]})]})]})};a()}catch(e){a(e)}})},3593:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>u});var r=s(997),l=s(6689),i=s(968),d=s.n(i),o=s(1163),x=s(3706),n=s(3946),c=s(4122),h=s(3155),p=e([h]);h=(p.then?(await p)():p)[0];let u=(0,x.withAuth)(function(){let[e,t]=(0,l.useState)(!0),[s,a]=(0,l.useState)([]),[i,x]=(0,l.useState)({}),[p,u]=(0,l.useState)(30);(0,o.useRouter)(),(0,l.useEffect)(()=>{(async function(){t(!0);try{let e=await (0,n.fD)(p,"APGUJEONG");a(e);let t=(0,n.Qt)(e,"APGUJEONG");x(t)}catch(e){console.error("Error fetching APGUJEONG data:",e)}finally{t(!1)}})()},[p]);let handlePeriodChange=e=>{u(e)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,r.jsxs)(d(),{children:[r.jsx("title",{children:"웜가이즈 - 압구정곱창 대시보드"}),r.jsx("meta",{name:"description",content:"웜가이즈 압구정곱창 매출 대시보드"})]}),r.jsx(c.Z,{}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-6",children:"압구정곱창 대시보드"}),r.jsx("div",{className:"flex justify-end mb-4",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>handlePeriodChange(7),className:`px-4 py-2 rounded ${7===p?"bg-blue-500 text-white":"bg-gray-200"}`,children:"7일"}),r.jsx("button",{onClick:()=>handlePeriodChange(30),className:`px-4 py-2 rounded ${30===p?"bg-blue-500 text-white":"bg-gray-200"}`,children:"30일"}),r.jsx("button",{onClick:()=>handlePeriodChange(90),className:`px-4 py-2 rounded ${90===p?"bg-blue-500 text-white":"bg-gray-200"}`,children:"90일"})]})}),e?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):r.jsx(h.Z,{salesData:s,kpis:i})]})]})});a()}catch(e){a(e)}})},2885:e=>{e.exports=require("@supabase/supabase-js")},6924:e=>{e.exports=require("date-fns/endOfMonth")},3864:e=>{e.exports=require("date-fns/endOfWeek")},4384:e=>{e.exports=require("date-fns/format")},5564:e=>{e.exports=require("date-fns/locale")},5914:e=>{e.exports=require("date-fns/startOfMonth")},2659:e=>{e.exports=require("date-fns/startOfWeek")},5358:e=>{e.exports=require("date-fns/subDays")},5502:e=>{e.exports=require("eventemitter3")},8759:e=>{e.exports=require("lodash/every")},6918:e=>{e.exports=require("lodash/find")},8190:e=>{e.exports=require("lodash/flatMap")},1712:e=>{e.exports=require("lodash/get")},2327:e=>{e.exports=require("lodash/isBoolean")},113:e=>{e.exports=require("lodash/isEqual")},5716:e=>{e.exports=require("lodash/isFunction")},8843:e=>{e.exports=require("lodash/isNaN")},6069:e=>{e.exports=require("lodash/isNil")},7078:e=>{e.exports=require("lodash/isNumber")},5795:e=>{e.exports=require("lodash/isObject")},5452:e=>{e.exports=require("lodash/isPlainObject")},7026:e=>{e.exports=require("lodash/isString")},3824:e=>{e.exports=require("lodash/last")},9941:e=>{e.exports=require("lodash/mapValues")},6625:e=>{e.exports=require("lodash/max")},541:e=>{e.exports=require("lodash/memoize")},604:e=>{e.exports=require("lodash/min")},4042:e=>{e.exports=require("lodash/range")},4129:e=>{e.exports=require("lodash/some")},3672:e=>{e.exports=require("lodash/sortBy")},1381:e=>{e.exports=require("lodash/throttle")},9309:e=>{e.exports=require("lodash/uniqBy")},5428:e=>{e.exports=require("lodash/upperFirst")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},1469:e=>{e.exports=require("react-is")},3522:e=>{e.exports=require("react-smooth")},997:e=>{e.exports=require("react/jsx-runtime")},9540:e=>{e.exports=require("recharts-scale")},8970:e=>{e.exports=require("victory-vendor/d3-scale")},2725:e=>{e.exports=require("victory-vendor/d3-shape")},6593:e=>{e.exports=import("clsx")},4281:e=>{e.exports=import("tiny-invariant")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[761,163,209,450,664,394,65,946,36,850],()=>__webpack_exec__(3415));module.exports=s})();